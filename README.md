# YangLiang1001

Abstract
The point cloud is a set of vectors organized in a three-dimensional coordinate system. These vectors are usually represented in the form of X, Y, Z three-dimensional coordinates, and are generally used to represent the shape of an object's external surface. Nowadays, point clouds are being widely used in several fields, including architectural design, driverless operation system, quality inspection of machinery and equipment, augmented reality and so on. In these areas, above all else, segmentation is the most basic method for point cloud processing. However, since the disorder and confusion of point clouds, splitting a point cloud is particularly difficult. In this paper, an improved algorithm for point cloud segmentation based on region growing is proposed. Unlike traditional region growing methods, which start from one or more seed points, we construct an undirected graph according to the point cloud and then grow around neighboring points from each of the nodes in the undirected graph We do not utilize the seed points because an inaccurate location of initial seed region may lead to a not exact result. Furthermore, we can avoid the shortcoming of traditional methods: sensitive to the initial seed points. In addition, the proposed system can also be used for identifying the noise points. We tested our method on several different point cloud models and received excellent results among all of them with advantages of high efficiency and high accuracy rate. 

Introduction
The point cloud is a data structure used to represent a collection of multi-dimensional points data. Usually, theses points data are organized in the form of X, Y, Z three-dimensional coordinates. Since they can depict the shape of an object's external surface, the point clouds are widely applied in several fields in recent years. They can be employed for 3d modeling, 3D scene reconstruction, driverless operation system, simulation of machine parts, augmented reality and so on. However, since the disorder and confusion of point clouds, there are large numbers of innovative methods are needed for the analysis and processing of these three-dimensional data structures. Among, point cloud segmentation is the procedure which must first proceed with. Segmentation is the process of labeling every point in the point clouds and then classifying the whole point clouds into multiple homogeneous regions with similar properties. Owing to the irregular sampling, varied of objects, varying density and etc., point clouds are commonly variety and complexity, that makes the segmentation of point clouds is particularly difficult. Besides, this also makes the segmentation to be a very active research topic and there are a large number of research studies related to this topic.

The existed segmentation strategies can be classified into three categories: the edge-based method, the region growing method, and the model fitting method. The edge-based method firstly detects the borders of different regions in a point cloud and then group points according to the boundaries to obtain the segments. The disadvantage of the edge-based method is that the results may inaccurate due to the noises and uneven density of point clouds. In addition, such methods often outline disconnected edges, making it difficult to identify closed segments without an interpretation or filling procedure; The region growing algorithms have two main stages:1) choose one or more points as the seed points.2) grow around neighboring points from the initialed seed points with similar characteristics. While region-based methods are most robust to noise than the edge-based ones, they are sensitive to the location of initial seed points; The third method is the segmentation by model fitting. The principle of this approach is that most of the objects can be composed of different types of geometric primitives, such as planes, circulars, and cones. Consequently, a variety of predesigned models are fitted onto point cloud and the points that form similar shapes are divided into one segment. However, since details are usually difficult to be represented as easily identifiable shapes, this approach is not applicable for complicated condition situation. Besides, it is not fully automated implementation due to the need of predesigned models.

To summarize, the method based on region growing is the most widely used algorithm with high efficiency and high accuracy rate. However, the selection of seed points has great influence on the final result in this method. To solve this problem, we proposed an improved region growing algorithm for point cloud segmentation. Instead of selecting one or more seed points, we construct an undirect graph according the point cloud. Besides, an undirect graph is a set of nodes and a collection of paths that each connect a pair of nodes, each path has weight to define whether the path is connected. We connect paths between adjacent points in the point cloud and set the path weight of points with similar normals to 1, and the path weight of points with different normal to 0. After that, the constructed undirect graph is obtained. Then start from one of the nodes, grow along the paths and then merge the nodes with a path weight equal to 1 together as one segment. Skip the merged nodes and repeat the loop until every node has been merged. The segments with a small number of points can be regarded as noises. After all, we combine adjacent small segments together to get a better result. Compared with traditional region growing methods, the proposed algorithm has the following merits: 1) the final result is not affected by the location of initial seed points.2) noises can be identified and filtered at the same time.3) by analyzing and processing the experiment data, higher accuracy and higher efficiency of this method are proved.

The rest of this paper is organized as follows: In Section Two, some related works are introduced. Section Three describes the proposed scheme in detail. Section Four provides performance analysis and experimental results of this proposed scheme. Section Five concludes the detailed content of this study.

Related work（不用看，我直接抄的，明天改）
In edge-based segmentation, the boundary line connected by boundary points is the fundamental base for the segmentation. Wang et al. [24] proposed a segmentation algorithm for point cloud models of buildings. Their algorithm extracts buildings according to the boundary of the point cloud models. The boundary corresponds to discontinuities in depth or height, and therefore distinguishes one building from other buildings and objects on the ground. However, this method is very sensitive to noise. Dai et al. [7] developed a segmentation method for a point cloud distributed in the principal direction of tree models. The algorithm calculates the principal curvature and direction of the points from the tree point cloud models and uses this information to define an energy function. It then determines the segmentation of the leaves and branches according to the defined energy function and obtains the final segmentation results by separating the leaves and branches. The algorithm has a high operating efficiency, but its application is limited to tree models. Guillaume et al. [13] calculated the curvature tensor-based triangle mesh and used it to segment points into surface patches. Then, they adjusted the boundaries to obtain the segmentation of patch edges. Surface-based segmentation uses local surface attributes as a similarity measure and merges the points with similar attributes [21]. It can also provide information with abstract expressions, which is useful for expression and analysis [17]. This method usually performs better than edge-based segmentation. Richtsfeld et al. [22] proposed a segmentation method using radial reflection to estimate model shapes. The algorithm mainly extracts the model shapes of surfaces. Rabbani et al. [21] proposed a constraint-based segmentation algorithm that can extract smooth regions in point cloud models. However, its segmentation results depend heavily on the parameter settings. Yamauchi et al. [25] proposed mesh segmentation with a mean shift algorithm. It is based on normal clustering using an adaptive mean shift algorithm and performs segmentation using the region-growing algorithm. The authors algorithm was originally proposed for the segmentation of images [6]. The mixed method involves combining methods based on edges and surfaces. Zhang et al. [28] used a statistical method to extract feature lines; however, it is affected by noise and sampling quality. Lari [16] proposed a segmentation algorithm that can quickly extract linear features in the point cloud data instead of segmenting the entire point cloud data, which leads to some limitations regarding the segmentation result. Zhana et al. [27] proposed a segmentation algorithm based on a color model to segment buildings, but this algorithm cannot be applied to point cloud models that do not contain color information, thereby greatly limiting its application potential. Dorninger et al. [9] proposed a point cloud segmentation algorithm based on parametric space. The algorithm clusters point cloud data in the space defined by the parameterization of the point cloud. However, this method is difficult to apply to unorganized point cloud data models. Gomes et al. [12] used 3D moving fovea to process parts of a scene using different levels of resolution. This approach can be used to identify objects in a point cloud. 
Proposed method
To process a point cloud is not an easy thing since point clouds have the following properties:1) Point clouds are usually chaotic and complex. Influenced by the acquisition equipment and coordinate system, when an object is scanned by different equipment or from different positions, the order of obtained three-dimensional points varies greatly. Such data is difficult to process directly through an End2End model.2) Point clouds are sparsity. In some cases, the LIDAR sampling coverage is very sparse with respect to the scale of the scene. This high sparsity makes the high-level semantic perception for point cloud become particularly difficult.3) Point cloud information is limited. The data structure of point clouds is a set of points in the three-dimensional space. It is essentially a low-resolution geometry resampling of the real world, so it can only provide incomplete geometric information.

Based on above-mentioned reasons, there are large numbers of innovative methods are needed for analyzing and processing point clouds. Among, segmentation is the most basic step. Region growth method is widely used because it is easy to implement and easy to use in 3D point cloud segmentation. However, due to the uncertainty of point cloud features and the unreasonable selection of seed points, the performance of traditional region growing methods are unstable. Aiming at this problem, an improved regional growth segmentation method is proposed. Instead of selecting one or more seed points, we set every point in the point cloud as the seed point. The steps of proposed scheme are: 1) Preprocessing of point clouds: normalizing and rearranging point clouds.2) Estimating normals. In the proposed algorithm, we apply the differences between normals of each point as the indicator function to decide whether these points should be merged together or not.3) Constructing the undirect graph and merging different nodes iteratively.4) Identifying and filtering noise points.5) Merging small segments iteratively. The flow chart of the algorithm is as follows:


Preprocessing of point clouds. Usually, People use Laser equipment to scan an object and then obtain the point data collection of the appearance and surface of this object. However, due to the different size of scanned objects and different equipment people used, point cloud obtained maybe totally different. So we need to normalize and rearrange the point clouds firstly. To normalize the point clouds, we adjust objects in the point clouds to a uniform size. In the proposed approach, we scale the objects to a cubic meter of space. That is, we set the coordinate of the minimum point to zero and the maximum point to one, and then modify other points in proportion. After then, we sort the normalized point cloud to in a fixed order. Because the points in point clouds are disordered, so if we want to find the neighboring points of a point, we have to search the whole point clouds. This may reduce the efficiency of the algorithm. Therefore, we rearrange the point clouds in the order of coordinates and so that we just need to calculate the adjacent points instead of the whole point clouds. We use quick sort method according to the function:

Where means the of pointrespectively. If equals to 1 then, we put pointin front of and vice versa.

Estimating normals. The surface normal is an important property of the geometric surface. It is widely used in many fields. For example, the surface normal information is needed to produce visual effects in illumination rendering. The normals represent the direction of the corresponding points. In the proposed scheme, we calculate the difference between normals of two points to deiced whether these two points should be divided into one segment. The normals estimation method now has been implemented in Point cloud library(PCL) as “Normal Estimation”.

Constructing the undirect graph and merging different points iteratively. Unlike traditional region growing methods, which need to select one or more points as the seed points, we directly set all points in the point cloud as the seed points and then divide each of them into different groups. Firstly, we construct an undirect graph according to the point cloud: connect paths between neighboring points and then set the path weight to 1 if the points have the similar normals, otherwise, set the path weight to 0. After that the constructed undirect graph is obtained. Then we start from the one of the nodes in the undirect graph, grow along the paths and merge the nodes with path weight equals to 1 together as one segment. Skip the merged nodes and repeat the loop until every node has been merged. The neighboring points are defined according to the function:

Where is a function used to calculate the distance between.is a threshold. In order to fully automate our strategy, we use an adaptive parameter. Since the threshold is related to the point cloud density, we set theas follow:

Where  used to calculate the length of the X axis of point cloud .is the number of points in the point cloud .
The pseudo-code of the improved region growing algorithm is described in Algorithm 1:
Algorithm 1：The proposed algorithm
Data: Preprocessed point cloud , the corresponding estimated normals

Result: a set of incomplete segments
Begin
     current Region
continue=true
     while continue do
continue=false
          for each point 
if ==0 then
                insert 
              if ==0 then
for each point 
       if then
           merge  and together
          set and
continue=true
          if continue==false then
             exit loop
Return 

Figure 1. (a) original point cloud (b) result after the iteration (c) result after filtering noise points
 (d) result after merging small segments
Experiments show that only one iteration is needed for merging different points, this imp roves the efficiency of the algorithm. As the Figuer 1 shows, after the interation, all of the points have been divided.

Identifying and filtering noise points. For various reasons, such as the surface roughness, ripple and other surface defects of the scanned object, as well as the impact of the Laser equipment itself, it is inevitable that there are unreasonable noise points duiring the process of point sampling. Therefore, the noise points must be filtered out. In the proposed method, the noise points can be easily indentified by measuring the number of points in each segments, if the number of points contained in a segment is less than the threshold, we can regard the points in this segment as noise. The result after filtering noise points is demonstrated in Figure 1.

Merging small segments iteratively. Due to the impact of scanning environment and equipment defects, the details of the scanned object can not be fully displayed in the point cloud, there will be some errors. This may causes over-segmentation at the incorrect position. So we combine adjacent small segments together to avoid over-segmentation and to generate a better result. The result is shown in Figure 1. 
Experimental tests
To determine robustness and efficiency of the proposed method, we employ several point cloud models to do comparative experiments with the standard region growing algorithm which was proposed by Rabbani et al. The standard region growing algorithm was published in 2006 and now it was implemented in C++ and published in the Point Cloud Library (PCL,2014). The proposed scheme was implemented using C++ and run on an Intel i7-4790 CPU@3.60HZ and with 32G RAM. Some of the results are showed as follows:

As the above images demonstrated, we can clearly observe that the results of the proposed approach are much better than the Rabbani et al’s, especially in complex details. This is because:1) we apply the constructed undirected graph to group the points in the point cloud, so we can avoid the inaccurate location of initial seed region which may lead to a not exact result. 2) we can filter the noise points, so the results are more intuitive. 3)we combine small segments, therefore we can avoid over segmentation and maintain consistency in details.
